
# Appendix 10a. Supplemental catch data 

In order to comply with the Annual Catch Limit (ACL) requirements, a dataset has been generated to help estimate total catch and removals from NMFS stocks in Alaska. 
This dataset estimates total removals that occur during non-directed groundfish fishing activities. 
This includes removals incurred during research, subsistence, personal use, recreational, and exempted fishing permit activities, but does not include removals taken in fisheries other than those managed under the groundfish FMP. These estimates represent additional sources of removals to the existing Catch Accounting System estimates. 
For Gulf of Alaska (GOA) northern rockfish, these estimates can be compared to the research removals reported in previous assessments.


```{r appxAcatch, echo = FALSE, warning = FALSE, message = FALSE}
aa0 <- read.csv(here('data','catch','10112022-noncommercialfisherycatch.csv'))
aa <- aa0 %>%
  filter(FMP.Area == 'GOA') %>%
  group_by(Collection.Year,Collection.Agency,Collection.Name) %>%
  dplyr::summarise(v =  round(sum(Weight),3)) %>%
  tidyr::pivot_wider(names_from = c(Collection.Agency,Collection.Name), values_from = v, id_cols = Collection.Year)  %>%
  janitor::clean_names() %>%
  data.frame() 

## for header rows
repnums <- aa0 %>%
   group_by(Collection.Agency) %>%
  summarise(n = length(unique(Collection.Name))) %>%
  arrange(Collection.Agency)

aa <-  aa %>% select(collection_year , order(colnames(aa)))
aa[aa > 1 & !is.na(aa)] <- round(aa[aa > 1 & !is.na(aa)],0)
aa[aa < 1 & !is.na(aa)] <- round(aa[aa < 1 & !is.na(aa)],2)
aa$collection_year <- as.character(aa$collection_year)


```

```{r appxAADFG, echo = FALSE, warning = FALSE, message = FALSE}
flextable::regulartable(aa %>%
  select(collection_year ,grep('adfg',colnames(aa)))) %>% 
  flextable::autofit(part = "all") %>%
  flextable::align(align = "center", part = "all")%>% 
  flextable::merge_h(part = "header") %>%
  flextable::merge_v(part = "header")  %>%  
  flextable::set_caption("Non-Commercial Catches of GOA Flathead Sole from ADF&G; values in kg.") %>% flextable::autofit()
# flextable::width( width = c(3,2,2))
```

```{r appxAIPHC, echo = FALSE, warning = FALSE, message = FALSE}
flextable::regulartable(aa %>%
  select(collection_year , grep('iphc',colnames(aa)))) %>% 
  flextable::autofit(part = "all") %>%
  flextable::align(align = "center", part = "all")%>% 
  flextable::merge_h(part = "header") %>%
  flextable::merge_v(part = "header")  %>%  
  flextable::set_caption("Non-Commercial Catches of GOA Flathead Sole from the IPHC; values in kg.") %>% flextable::autofit()
# flextable::width( width = c(3,2,2))
```

```{r appxANFMS, echo = FALSE, warning = FALSE, message = FALSE}
flextable::regulartable(aa %>%
  select(collection_year ,grep('nmfs',colnames(aa)))) %>% 
  flextable::autofit(part = "all") %>%
  flextable::align(align = "center", part = "all")%>% 
  flextable::merge_h(part = "header") %>%
  flextable::merge_v(part = "header")  %>%  
  flextable::set_caption("Non-Commercial Catches of GOA Flathead Sole from NMFS; values in kg.") %>% flextable::autofit()
# flextable::width( width = c(3,2,2))
```
 