{
    "type": [
        2,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        0,
        1,
        3,
        3,
        3,
        3,
        0,
        1,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        3,
        0,
        1,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        3,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        3,
        3,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        3,
        3,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        3,
        3,
        3,
        0,
        1,
        0,
        1,
        2
    ],
    "data": [
        "\nR version 4.2.1 (2022-06-23 ucrt) -- \"Funny-Looking Kid\"\nCopyright (C) 2022 The R Foundation for Statistical Computing\nPlatform: x86_64-w64-mingw32/x64 (64-bit)\n\nR is free software and comes with ABSOLUTELY NO WARRANTY.\nYou are welcome to redistribute it under certain conditions.\nType 'license()' or 'licence()' for distribution details.\n\nR is a collaborative project with many contributors.\nType 'contributors()' for more information and\n'citation()' on how to cite R or R packages in publications.\n\nType 'demo()' for some demos, 'help()' for on-line help, or\n'help.start()' for an HTML browser interface to help.\nType 'q()' to quit R.\n\n",
        "[Workspace loaded from ~/assessments/2022/goa-fhs-2022/.RData]\r\n\r\n",
        "> ",
        "this_year",
        "[1] 2022\n",
        "> ",
        "paste0(range(this_year-5,this_year))",
        "[1] \"2017\" \"2022\"\n",
        "> ",
        "paste0(range(this_year-5,this_year),sep = \"-\")",
        "[1] \"2017-\" \"2022-\"\n",
        "> ",
        "paste0(range(this_year-5,this_year),collapse = \"-\")",
        "[1] \"2017-2022\"\n",
        "> ",
        "require(MetBrewer)",
        "> ",
        "require(ggtext)",
        "> ",
        "require(showtext)",
        "> ",
        "require(ggplot2)",
        "> ",
        "font_add_google(\"roboto condensed\")",
        "> ",
        "showtext_opts(dpi = 520)",
        "> ",
        "showtext_auto(enable = TRUE)",
        "> ",
        "ggplot2::theme_set(ggsidekick::theme_sleek())",
        "> ",
        "theme_replace(text= element_text(family = \"roboto condensed\"), title=element_text(family = \"roboto condensed\")) ",
        "> ",
        "",
        "> ",
        "## all colors to use in this document",
        "> ",
        "docPal <- c('grey22',met.brewer(name = 'Degas',n = 15))",
        "> ",
        "m2017Col <- docPal[1]",
        "> ",
        "baseCol <- \"#3A7D6C\"",
        "> ",
        "sensPal <- met.brewer(name = 'Demuth',n = 10)[6:10]",
        "> ",
        "fleetPal <- c(baseCol,'dodgerblue2')",
        "> ",
        "",
        "> ",
        "modlabs = c('Model 17.0 (Accepted 2017)','Mod 17.1a (Proposed 2022)')",
        "> ",
        "base_srv1990 <- SS_output( here('model_runs','m0_8-newMI-biasAdj-srv1990'))",
        "Error in SS_output(here(\"model_runs\", \"m0_8-newMI-biasAdj-srv1990\")) : \n  could not find function \"SS_output\"\n",
        "> ",
        "require(r4ss)",
        "Loading required package: r4ss\n",
        "\nAttaching package: ‘r4ss’\n\n",
        "The following object is masked from ‘package:stats’:\n\n    profile\n\n",
        "The following object is masked from ‘package:base’:\n\n    jitter\n\n",
        "> ",
        "base_srv1990 <- SS_output( here('model_runs','m0_8-newMI-biasAdj-srv1990'))",
        "Error in here(\"model_runs\", \"m0_8-newMI-biasAdj-srv1990\") : \n  could not find function \"here\"\n",
        "> ",
        "require(r4ss)",
        "> ",
        "require(dplyr)",
        "> ",
        "require(here)",
        "> ",
        "base_srv1990 <- SS_output( here('model_runs','m0_8-newMI-biasAdj-srv1990'))",
        "$SS_version\n[1] \"3.30.17.00;_2021_06_11;_safe;_Stock_Synthesis_by_Richard_Methot_(NOAA)_using_ADMB_12.3\"\n\n$SS_versionshort\n[1] \"3.30\"\n\n$SS_versionNumeric\n[1] 3.3\n\n$StartTime\n[1] \"StartTime: Tue Nov 01 11:50:17 2022\"\n\n$RunTime\n[1] \"0 hours, 1 minutes, 39 seconds.\"\n\n$Files_used\n[1] \"Data_File: data.ss Control_File: control.ss\"\n\n$log_det_hessian\n[1] 322.99\n\n$Nwarnings\n[1] 6\n\n$warnings\n [1] \"#V3.30.17.00;_2021_06_11;_safe;_Stock_Synthesis_by_Richard_Methot_(NOAA)_using_ADMB_12.3\"                               \n",
        " [2] \"#Stock Synthesis (SS) is a work of the U.S. Government and is not subject to copyright protection in the United States.\"\n [3] \"#Foreign copyrights may apply. See copyright.txt for more information.\"                                                 \n [4] \"Tue Nov 01 11:50:17 2022\"                                                                                               \n [5] \"\"                                                                                                                       \n [6]",
        " \"This file contains warnings, suggestions and notes generated as files are read and processed\"                           \n [7] \"\"                                                                                                                       \n [8] \"1 Forecast=0 or -1, so rest of forecast file will not be read and can be omitted;\"                                      \n [9] \"1 A one year forecast using recent F will be done automatically\"                                                        \n[10] \"2  Main recdev biasadj is >2 times ratio of rmse to sigmaR\"                                                             ",
        "\n[11] \"3 warning: poor convergence in Fmsy, final dy/dy2= -0.194232\"                                                           \n[12] \"4 Fmsy is >3x of Fspr are you sure?  check for convergence \"                                                            \n[13] \"5 Fmsy is close to max allowed; check for convergence \"                                                                 \n[14] \"6  Number_of_active_parameters_on_or_near_bounds: 1\"                                                                    \n[15]",
        " \"N warnings: 6\"                                                                                                          \n\n$likelihoods_used\n                           values lambdas\nTOTAL                 1.63854e+03      NA\nCatch                 2.38278e-13      NA\nEquil_catch           1.95687e-05      NA\nSurvey               -9.48503e+00      NA\nLength_comp           6.20268e+02      NA\nAge_comp              1.04257e+03      NA\nRecruitment          -1.48163e+01       1\nInitEQ_Regime         3.46667e-31       1",
        "\nForecast_Recruitment  0.00000e+00       1\nParm_priors           0.00000e+00       1\nParm_softbounds       4.24725e-04      NA\nParm_devs             0.00000e+00       1\nCrash_Pen             0.00000e+00       1\n\n$likelihoods_laplace\n                                     values lambdas\nNoBias_corr_Recruitment(info_only)  -26.128       1\nLaplace_obj_fun(info_only)         1627.220      NA\n\n$likelihoods_by_fleet\n              Label          ALL     Fishery     Survey\n159    Catch_lambda           NA 1.00000e+00",
        "    1.00000\n160      Catch_like  2.38278e-13 2.38278e-13    0.00000\n161 Init_equ_lambda           NA 1.00000e+00    1.00000\n162   Init_equ_like  1.95687e-05 1.95687e-05    0.00000\n163     Surv_lambda           NA 0.00000e+00    1.00000\n164       Surv_like -9.48503e+00 0.00000e+00   -9.48503\n165      Surv_N_use           NA 0.00000e+00   14.00000\n166     Surv_N_skip           NA 0.00000e+00    0.00000\n167   Length_lambda           NA 1.00000e+00    1.00000\n168     Length_like  6.20268e+02 4.71983e+02  148.28500",
        "\n169    Length_N_use           NA 3.30000e+01   14.00000\n170   Length_N_skip           NA 7.00000e+00    3.00000\n171      Age_lambda           NA 0.00000e+00    1.00000\n172        Age_like  1.04257e+03 0.00000e+00 1042.57000\n173       Age_N_use           NA 0.00000e+00  562.00000\n174      Age_N_skip           NA 0.00000e+00   78.00000\n\n$N_estimated_parameters\n[1] 86\n\n$table_of_phases\n\n-99  -4  -3  -2   1   2   3   4   5   6 \n  2  10  18   1  40   9   5   2   1  29 \n\n$estimated_non_dev_parameters\n                             ",
        "       Value Phase      Min   Max\nL_at_Amin_Fem_GP_1            10.21120000     2   2.0000 20.00\nL_at_Amax_Fem_GP_1            44.36830000     3  25.0000 80.00\nVonBert_K_Fem_GP_1             0.18313300     2   0.0100  2.00\nCV_young_Fem_GP_1              0.14194300     3   0.0001  2.00\nCV_old_Fem_GP_1                0.09587510     4   0.0001  2.00\nL_at_Amin_Mal_GP_1            10.09780000     2   1.0000 45.00\nL_at_Amax_Mal_GP_1            36.72410000     3  20.0000 70.00\nVonBert_K_Mal_GP_1             0.25845900",
        "     2   0.0500  0.35\nCV_young_Mal_GP_1              0.15554200     3   0.0001  2.00\nCV_old_Mal_GP_1                0.08336370     4   0.0001  2.00\nSR_LN(R0)                     12.85460000     1   6.5000 13.50\nInitF_seas_1_flt_1Fishery      0.00602559     5   0.0000  2.00\nAge_DblN_peak_Fishery(1)      11.71540000     1   1.0000 16.00\nAge_DblN_ascend_se_Fishery(1)  2.56162000     2  -4.0000 12.00\nAgeSel_1Male_Peak_Fishery     -0.93254900     2 -15.0000 15.00\nAgeSel_1Male_Ascend_Fishery   -0.09524320     3 -15.0000",
        " 15.00\nAge_DblN_peak_Survey(2)        7.21495000     1   1.0000 20.00\nAge_DblN_ascend_se_Survey(2)   2.17375000     2  -4.0000 12.00\nAgeSel_2Male_Peak_Survey      -0.88145400     2 -15.0000 15.00\nAgeSel_2Male_Ascend_Survey    -0.39301000     2 -15.0000 15.00\n                                     Init Status  Parm_StDev\nL_at_Amin_Fem_GP_1             9.47332000     OK 0.278677000\nL_at_Amax_Fem_GP_1            44.39840000     OK 0.359238000\nVonBert_K_Fem_GP_1             0.18769800     OK 0.005095450\nCV_young_Fem_GP_1            ",
        "  0.10676200     OK 0.006102370\nCV_old_Fem_GP_1                0.09454790     OK 0.003158660\nL_at_Amin_Mal_GP_1             9.54299000     OK 0.288247000\nL_at_Amax_Mal_GP_1            36.85970000     OK 0.182633000\nVonBert_K_Mal_GP_1             0.25617000     OK 0.006476480\nCV_young_Mal_GP_1              0.12779200     OK 0.006914710\nCV_old_Mal_GP_1                0.08060530     OK 0.002337390\nSR_LN(R0)                     12.82190000     OK 0.037617400\nInitF_seas_1_flt_1Fishery      0.00650716     LO 0.000295286",
        "\nAge_DblN_peak_Fishery(1)      12.41610000     OK 0.394301000\nAge_DblN_ascend_se_Fishery(1)  2.77241000     OK 0.126485000\nAgeSel_1Male_Peak_Fishery     -0.98358800     OK 0.349077000\nAgeSel_1Male_Ascend_Fishery   -0.11569200     OK 0.139796000\nAge_DblN_peak_Survey(2)        7.24603000     OK 0.253488000\nAge_DblN_ascend_se_Survey(2)   2.13572000     OK 0.120803000\nAgeSel_2Male_Peak_Survey      -0.67162300     OK 0.257598000\nAgeSel_2Male_Ascend_Survey    -0.30392500     OK 0.144478000\n                             ",
        "        Gradient  Pr_type Prior Pr_SD\nL_at_Amin_Fem_GP_1             0.000002147790 No_prior    NA    NA\nL_at_Amax_Fem_GP_1             0.000021745100 No_prior    NA    NA\nVonBert_K_Fem_GP_1             0.000019408900 No_prior    NA    NA\nCV_young_Fem_GP_1             -0.000002017610 No_prior    NA    NA\nCV_old_Fem_GP_1               -0.000005294300 No_prior    NA    NA\nL_at_Amin_Mal_GP_1            -0.000001178950 No_prior    NA    NA\nL_at_Amax_Mal_GP_1             0.000020824900 No_prior    NA    NA\nVonBert_K_Mal_GP_1           ",
        "  0.000001340620 No_prior    NA    NA\nCV_young_Mal_GP_1             -0.000000520036 No_prior    NA    NA\nCV_old_Mal_GP_1               -0.000003852220 No_prior    NA    NA\nSR_LN(R0)                     -0.000000736779 No_prior    NA    NA\nInitF_seas_1_flt_1Fishery      0.000022782000 No_prior    NA    NA\nAge_DblN_peak_Fishery(1)       0.000011632000 No_prior    NA    NA\nAge_DblN_ascend_se_Fishery(1) -0.000055763800 No_prior    NA    NA\nAgeSel_1Male_Peak_Fishery      0.000011871000 No_prior    NA    NA\nAgeSel_1Male_Ascend_Fishery  ",
        " -0.000029887000 No_prior    NA    NA\nAge_DblN_peak_Survey(2)        0.000006643210 No_prior    NA    NA\nAge_DblN_ascend_se_Survey(2)  -0.000025963000 No_prior    NA    NA\nAgeSel_2Male_Peak_Survey      -0.000000374444 No_prior    NA    NA\nAgeSel_2Male_Ascend_Survey     0.000003707100 No_prior    NA    NA\n                              Pr_Like Afterbound\nL_at_Amin_Fem_GP_1                 NA         OK\nL_at_Amax_Fem_GP_1                 NA         OK\nVonBert_K_Fem_GP_1                 NA         OK\nCV_young_Fem_GP_1            ",
        "      NA         OK\nCV_old_Fem_GP_1                    NA         OK\nL_at_Amin_Mal_GP_1                 NA         OK\nL_at_Amax_Mal_GP_1                 NA         OK\nVonBert_K_Mal_GP_1                 NA         OK\nCV_young_Mal_GP_1                  NA         OK\nCV_old_Mal_GP_1                    NA         OK\nSR_LN(R0)                          NA         OK\nInitF_seas_1_flt_1Fishery          NA         OK\nAge_DblN_peak_Fishery(1)           NA         OK\nAge_DblN_ascend_se_Fishery(1)      NA         OK\nAgeSel_1Male_Peak_Fishery    ",
        "      NA         OK\nAgeSel_1Male_Ascend_Fishery        NA         OK\nAge_DblN_peak_Survey(2)            NA         OK\nAge_DblN_ascend_se_Survey(2)       NA         OK\nAgeSel_2Male_Peak_Survey           NA         OK\nAgeSel_2Male_Ascend_Survey         NA         OK\n\n$maximum_gradient_component\n[1] 5.57638e-05\n\n$parameters_with_highest_gradients\n                                   Value     Gradient\nAge_DblN_ascend_se_Fishery(1)  2.5616200 -5.57638e-05\nEarly_RecrDev_1978            -0.3338720  3.42392e-05\nAgeSel_1Male_Ascend_Fishery  ",
        " -0.0952432 -2.98870e-05\nMain_RecrDev_2015              0.3056580 -2.71880e-05\nAge_DblN_ascend_se_Survey(2)   2.1737500 -2.59630e-05\n\n$Length_Comp_Fit_Summary\n     Data_type Fleet Recommend_var_adj #  N Npos min_Nsamp max_Nsamp\n1360         4     1           1.26519 # 40   33   3.74417   330.735\n1361         4     2           1.64096 # 17   14 268.88900   498.268\n     mean_Nsamp_in mean_Nsamp_adj mean_Nsamp_DM DM_theta mean_effN\n1360       107.030        133.580            NA       NA   225.458\n1361       368.286",
        "        404.196            NA       NA   711.771\n     HarMean Curr_Var_Adj Fleet_name\n1360 135.413      1.24806    Fishery\n1361 604.343      1.09751     Survey\n\n$Age_Comp_Fit_Summary\n     Data_type Fleet Recommend_var_adj # Nsamp_adj Npos min_Nsamp\n2008         5     2          0.337361 #       640  562         1\n     max_Nsamp mean_Nsamp_in mean_Nsamp_adj mean_Nsamp_DM DM_theta\n2008   17.0501       13.0356         4.3454            NA       NA\n     mean_effN HarMean Curr_Var_Adj Fleet_name\n2008    17.397 4.47095",
        "     0.327887     Survey\n\n$SBzero\n[1] 105730\n\n$current_depletion\n[1] 0.893177\n\n$last_years_SPR\n[1] 0.97572\n\n$SPRratioLabel\n[1] \"(1-SPR)/(1-SPR_at_B35%)\"\n\n$sigma_R_in\n[1] 0.6\n\n$sigma_R_info\n           period N_devs SD_of_devs Var_of_devs   mean_SE mean_SEsquared\n1            Main     37  0.2406979  0.05793549 0.2014394     0.04983199\n2      Early+Main     66  0.2584699  0.06680667 0.3269140     0.13351140\n3 Early+Main+Late     68  0.2555465  0.06530403        NA             NA\n  sqrt_sum_of_components SD_of_devs_over_sigma_R",
        " sqrt_sum_over_sigma_R\n1              0.3282796               0.4011632             0.5471326\n2              0.4475691               0.4307831             0.7459485\n3                     NA               0.4259109                    NA\n  alternative_sigma_R\n1           0.3282796\n2           0.4475691\n3                  NA\n\n$rmse_table\n    ERA  N     RMSE RMSE_over_sigmaR mean_BiasAdj\n1  main 37 0.237423         0.156582     0.861603\n2 early 29 0.341224         0.323428     0.412991\n\n$cormessage1\n[1] Range of abs(parameter correlations) is 3.6682e-06 to 0.959366",
        "\n\n$cormessage2\n[1] 1 correlation above threshold (cormax=0.95)\n\n$cormessage3\n                           label.i                 label.j     corr\n    1 Age_DblN_ascend_se_Survey(2) Age_DblN_peak_Survey(2) 0.959366\n\n$cormessage7\n[1] 6 uncorrelated parameters below threshold (cormin=0.01)\n\n$cormessage8\n               name        max\n7  Early_InitAge_23 0.00491963\n8  Early_InitAge_22 0.00576282\n9  Early_InitAge_21 0.00670213\n10 Early_InitAge_20 0.00773097\n11 Early_InitAge_19 0.00883508\n12 Early_InitAge_18 0.00999081",
        "\n\n",
        "> ",
        "modcomp <- SSsummarize(list(base_srv1990,base_model))",
        "> ",
        "SSplotComparisons(modcomp,",
        "+ ",
        "                  plotdir = here('model_runs','m0_8-newMI-biasAdj-srv1990'),",
        "+ ",
        "                  print  = T,",
        "+ ",
        "                  col = c(sensPal[2],baseCol),",
        "+ ",
        "                  legendloc = 'bottomright',",
        "+ ",
        "                  # endyrvec = endyrvec,",
        "+ ",
        "                  legendlabels = c('No Survey Data < 1990',modlabs[2]))",
        "> ",
        "require(here)",
        "> ",
        "require(r4ss)",
        "> ",
        "require(dplyr)",
        "> ",
        "base_model <- SS_output(here('model_runs','m0_8-newMI-biasAdj'), covar=TRUE, verbose=FALSE, printstats=FALSE) ",
        "> ",
        "esth <- SS_output(here('model_runs','m0_8-newMI-biasadj-estH'))",
        "$SS_version\n[1] \"3.30.17.00;_2021_06_11;_safe;_Stock_Synthesis_by_Richard_Methot_(NOAA)_using_ADMB_12.3\"\n\n$SS_versionshort\n[1] \"3.30\"\n\n$SS_versionNumeric\n[1] 3.3\n\n$StartTime\n[1] \"StartTime: Thu Oct 13 10:32:34 2022\"\n\n$RunTime\n[1] \"0 hours, 2 minutes, 12 seconds.\"\n\n$Files_used\n[1] \"Data_File: data.ss Control_File: control.ss\"\n\n$log_det_hessian\n[1] 346.798\n\n$Nwarnings\n[1] 6\n\n$warnings\n [1] \"#V3.30.17.00;_2021_06_11;_safe;_Stock_Synthesis_by_Richard_Methot_(NOAA)_using_ADMB_12.3\"                               ",
        "\n [2] \"#Stock Synthesis (SS) is a work of the U.S. Government and is not subject to copyright protection in the United States.\"\n [3] \"#Foreign copyrights may apply. See copyright.txt for more information.\"                                                 \n [4] \"Thu Oct 13 10:32:34 2022\"                                                                                               \n [5] \"\"                                                                                                                       \n [6]",
        " \"This file contains warnings, suggestions and notes generated as files are read and processed\"                           \n [7] \"\"                                                                                                                       \n [8] \"1 Forecast=0 or -1, so rest of forecast file will not be read and can be omitted;\"                                      \n [9] \"1 A one year forecast using recent F will be done automatically\"                                                        \n[10] \"2  Main recdev biasadj is >2 times ratio of rmse to sigmaR\"                                                             ",
        "\n[11] \"3 warning: poor convergence in Fmsy, final dy/dy2= -0.192535\"                                                           \n[12] \"4 Fmsy is >3x of Fspr are you sure?  check for convergence \"                                                            \n[13] \"5 Fmsy is close to max allowed; check for convergence \"                                                                 \n[14] \"6  Number_of_active_parameters_on_or_near_bounds: 2\"                                                                    \n[15]",
        " \"N warnings: 6\"                                                                                                          \n\n$likelihoods_used\n                           values lambdas\nTOTAL                 1.78016e+03      NA\nCatch                 2.59119e-13      NA\nEquil_catch           5.61601e-05      NA\nSurvey               -1.16082e+01      NA\nLength_comp           6.87641e+02      NA\nAge_comp              1.11370e+03      NA\nRecruitment          -9.57505e+00       1\nInitEQ_Regime         3.46667e-31       1",
        "\nForecast_Recruitment  0.00000e+00       1\nParm_priors           0.00000e+00       1\nParm_softbounds       5.11815e-04      NA\nParm_devs             0.00000e+00       1\nCrash_Pen             0.00000e+00       1\n\n$likelihoods_laplace\n                                      values lambdas\nNoBias_corr_Recruitment(info_only)  -20.8867       1\nLaplace_obj_fun(info_only)         1768.8500      NA\n\n$likelihoods_by_fleet\n              Label          ALL     Fishery    Survey\n159    Catch_lambda           NA 1.00000e+00",
        "    1.0000\n160      Catch_like  2.59119e-13 2.59119e-13    0.0000\n161 Init_equ_lambda           NA 1.00000e+00    1.0000\n162   Init_equ_like  5.61601e-05 5.61601e-05    0.0000\n163     Surv_lambda           NA 0.00000e+00    1.0000\n164       Surv_like -1.16082e+01 0.00000e+00  -11.6082\n165      Surv_N_use           NA 0.00000e+00   17.0000\n166     Surv_N_skip           NA 0.00000e+00    0.0000\n167   Length_lambda           NA 1.00000e+00    1.0000\n168     Length_like  6.87641e+02 4.76309e+02  211.3310\n169    Length_N_use",
        "           NA 3.20000e+01   17.0000\n170   Length_N_skip           NA 8.00000e+00    0.0000\n171      Age_lambda           NA 0.00000e+00    1.0000\n172        Age_like  1.11370e+03 0.00000e+00 1113.7000\n173       Age_N_use           NA 0.00000e+00  597.0000\n174      Age_N_skip           NA 0.00000e+00   43.0000\n\n$N_estimated_parameters\n[1] 87\n\n$table_of_phases\n\n-99  -4  -3  -2   1   2   3   4   5   6 \n  2   9  18   1  40   9   5   3   1  29 \n\n$estimated_non_dev_parameters\n                                    Value",
        " Phase      Min   Max\nL_at_Amin_Fem_GP_1            10.12880000     2   2.0000 20.00\nL_at_Amax_Fem_GP_1            43.64800000     3  25.0000 80.00\nVonBert_K_Fem_GP_1             0.19190700     2   0.0100  2.00\nCV_young_Fem_GP_1              0.14094500     3   0.0001  2.00\nCV_old_Fem_GP_1                0.09867130     4   0.0001  2.00\nL_at_Amin_Mal_GP_1            10.05880000     2   1.0000 45.00\nL_at_Amax_Mal_GP_1            36.50110000     3  20.0000 70.00\nVonBert_K_Mal_GP_1             0.25955900     2   0.0500",
        "  0.35\nCV_young_Mal_GP_1              0.15649500     3   0.0001  2.00\nCV_old_Mal_GP_1                0.08451850     4   0.0001  2.00\nSR_LN(R0)                     12.85720000     1   6.5000 13.50\nSR_BH_steep                    0.99999900     4   0.2000  1.00\nInitF_seas_1_flt_1Fishery      0.00636787     5   0.0000  2.00\nAge_DblN_peak_Fishery(1)      12.25840000     1   1.0000 16.00\nAge_DblN_ascend_se_Fishery(1)  2.71164000     2  -4.0000 12.00\nAgeSel_1Male_Peak_Fishery     -1.02614000     2 -15.0000 15.00\nAgeSel_1Male_Ascend_Fishery  ",
        " -0.13945800     3 -15.0000 15.00\nAge_DblN_peak_Survey(2)        7.15779000     1   1.0000 20.00\nAge_DblN_ascend_se_Survey(2)   2.11540000     2  -4.0000 12.00\nAgeSel_2Male_Peak_Survey      -0.68826700     2 -15.0000 15.00\nAgeSel_2Male_Ascend_Survey    -0.30743200     2 -15.0000 15.00\n                                     Init Status  Parm_StDev\nL_at_Amin_Fem_GP_1             9.47332000     OK 0.280840000\nL_at_Amax_Fem_GP_1            44.39840000     OK 0.330815000\nVonBert_K_Fem_GP_1             0.18769800     OK",
        " 0.005146290\nCV_young_Fem_GP_1              0.10676200     OK 0.006102810\nCV_old_Fem_GP_1                0.09454790     OK 0.002987440\nL_at_Amin_Mal_GP_1             9.54299000     OK 0.283721000\nL_at_Amax_Mal_GP_1            36.85970000     OK 0.174200000\nVonBert_K_Mal_GP_1             0.25617000     OK 0.006257780\nCV_young_Mal_GP_1              0.12779200     OK 0.006653510\nCV_old_Mal_GP_1                0.08060530     OK 0.002255500\nSR_LN(R0)                     12.82190000     OK 0.037102900\nSR_BH_steep                  ",
        "  1.00000000     HI 0.000457772\nInitF_seas_1_flt_1Fishery      0.00650716     LO 0.000336826\nAge_DblN_peak_Fishery(1)      12.41610000     OK 0.481939000\nAge_DblN_ascend_se_Fishery(1)  2.77241000     OK 0.137554000\nAgeSel_1Male_Peak_Fishery     -0.98358800     OK 0.371213000\nAgeSel_1Male_Ascend_Fishery   -0.11569200     OK 0.136838000\nAge_DblN_peak_Survey(2)        7.24603000     OK 0.211024000\nAge_DblN_ascend_se_Survey(2)   2.13572000     OK 0.103216000\nAgeSel_2Male_Peak_Survey      -0.67162300     OK 0.229655000",
        "\nAgeSel_2Male_Ascend_Survey    -0.30392500     OK 0.130363000\n                                     Gradient  Pr_type Prior Pr_SD\nL_at_Amin_Fem_GP_1             0.000004364150 No_prior    NA    NA\nL_at_Amax_Fem_GP_1             0.000043370600 No_prior    NA    NA\nVonBert_K_Fem_GP_1             0.000055448300 No_prior    NA    NA\nCV_young_Fem_GP_1             -0.000000340695 No_prior    NA    NA\nCV_old_Fem_GP_1                0.000009192950 No_prior    NA    NA\nL_at_Amin_Mal_GP_1            -0.000001390150 No_prior",
        "    NA    NA\nL_at_Amax_Mal_GP_1             0.000013788800 No_prior    NA    NA\nVonBert_K_Mal_GP_1            -0.000004385400 No_prior    NA    NA\nCV_young_Mal_GP_1              0.000006393280 No_prior    NA    NA\nCV_old_Mal_GP_1                0.000008512940 No_prior    NA    NA\nSR_LN(R0)                      0.000028666600 No_prior    NA    NA\nSR_BH_steep                   -0.000001159120 No_prior    NA    NA\nInitF_seas_1_flt_1Fishery      0.000089484900 No_prior    NA    NA\nAge_DblN_peak_Fishery(1)      -0.000013564600",
        " No_prior    NA    NA\nAge_DblN_ascend_se_Fishery(1)  0.000060451200 No_prior    NA    NA\nAgeSel_1Male_Peak_Fishery     -0.000026835900 No_prior    NA    NA\nAgeSel_1Male_Ascend_Fishery    0.000077438600 No_prior    NA    NA\nAge_DblN_peak_Survey(2)        0.000033982200 No_prior    NA    NA\nAge_DblN_ascend_se_Survey(2)  -0.000052573700 No_prior    NA    NA\nAgeSel_2Male_Peak_Survey       0.000022695400 No_prior    NA    NA\nAgeSel_2Male_Ascend_Survey    -0.000060866500 No_prior    NA    NA\n                             ",
        " Pr_Like Afterbound\nL_at_Amin_Fem_GP_1                 NA         OK\nL_at_Amax_Fem_GP_1                 NA         OK\nVonBert_K_Fem_GP_1                 NA         OK\nCV_young_Fem_GP_1                  NA         OK\nCV_old_Fem_GP_1                    NA         OK\nL_at_Amin_Mal_GP_1                 NA         OK\nL_at_Amax_Mal_GP_1                 NA         OK\nVonBert_K_Mal_GP_1                 NA         OK\nCV_young_Mal_GP_1                  NA         OK\nCV_old_Mal_GP_1                    NA         OK\nSR_LN(R0)                    ",
        "      NA         OK\nSR_BH_steep                        NA      CHECK\nInitF_seas_1_flt_1Fishery          NA         OK\nAge_DblN_peak_Fishery(1)           NA         OK\nAge_DblN_ascend_se_Fishery(1)      NA         OK\nAgeSel_1Male_Peak_Fishery          NA         OK\nAgeSel_1Male_Ascend_Fishery        NA         OK\nAge_DblN_peak_Survey(2)            NA         OK\nAge_DblN_ascend_se_Survey(2)       NA         OK\nAgeSel_2Male_Peak_Survey           NA         OK\nAgeSel_2Male_Ascend_Survey         NA         OK\n\n$maximum_gradient_component\n",
        "[1] 9.96741e-05\n\n$parameters_with_highest_gradients\n                                    Value     Gradient\nEarly_InitAge_1                0.87789000  9.96741e-05\nInitF_seas_1_flt_1Fishery      0.00636787  8.94849e-05\nAgeSel_1Male_Ascend_Fishery   -0.13945800  7.74386e-05\nAgeSel_2Male_Ascend_Survey    -0.30743200 -6.08665e-05\nAge_DblN_ascend_se_Fishery(1)  2.71164000  6.04512e-05\n\n$Length_Comp_Fit_Summary\n     Data_type Fleet Recommend_var_adj #  N Npos min_Nsamp max_Nsamp\n1363         4     1           1.40024",
        " # 40   32    43.682   330.735\n1364         4     2           1.13255 # 17   17   216.209   498.268\n     mean_Nsamp_in mean_Nsamp_adj mean_Nsamp_DM DM_theta mean_effN\n1363       110.281        137.637            NA       NA   235.742\n1364       347.235        381.093            NA       NA   661.549\n     HarMean Curr_Var_Adj Fleet_name\n1363 154.420      1.24806    Fishery\n1364 393.262      1.09751     Survey\n\n$Age_Comp_Fit_Summary\n     Data_type Fleet Recommend_var_adj # Nsamp_adj Npos min_Nsamp\n2011         5",
        "     2          0.312384 #       640  597         1\n     max_Nsamp mean_Nsamp_in mean_Nsamp_adj mean_Nsamp_DM DM_theta\n2011   17.0501       12.6181        4.21221            NA       NA\n     mean_effN HarMean Curr_Var_Adj Fleet_name\n2011   16.4639 4.01305     0.327887     Survey\n\n$SBzero\n[1] 104127\n\n$current_depletion\n[1] 0.903173\n\n$last_years_SPR\n[1] 0.97593\n\n$SPRratioLabel\n[1] \"(1-SPR)/(1-SPR_at_B35%)\"\n\n$sigma_R_in\n[1] 0.6\n\n$sigma_R_info\n           period N_devs SD_of_devs Var_of_devs   mean_SE mean_SEsquared",
        "\n1            Main     37  0.2520189  0.06351352 0.1941364     0.04600057\n2      Early+Main     66  0.3457969  0.11957548 0.3094941     0.11952405\n3 Early+Main+Late     68  0.3415385  0.11664855        NA             NA\n  sqrt_sum_of_components SD_of_devs_over_sigma_R sqrt_sum_over_sigma_R\n1              0.3309291               0.4200315             0.5515486\n2              0.4889781               0.5763281             0.8149634\n3                     NA               0.5692308                    NA\n  alternative_sigma_R",
        "\n1           0.3309291\n2           0.4889781\n3                  NA\n\n$rmse_table\n    ERA  N     RMSE RMSE_over_sigmaR mean_BiasAdj\n1  main 37 0.248590         0.171658     0.861603\n2 early 29 0.489528         0.665661     0.412991\n\n$cormessage1\n[1] Range of abs(parameter correlations) is 4.33382e-07 to 0.959618\n\n$cormessage2\n[1] 2 correlations above threshold (cormax=0.95)\n\n$cormessage3\n                            label.i                  label.j     corr\n    1 Age_DblN_ascend_se_Fishery(1) Age_DblN_peak_Fishery(1)",
        " 0.959618\n    2  Age_DblN_ascend_se_Survey(2)  Age_DblN_peak_Survey(2) 0.951435\n\n$cormessage7\n[1] 1 uncorrelation below threshold (cormin=0.01)\n\n$cormessage8\n         name        max\n7 SR_BH_steep 0.00064073\n\n",
        "> ",
        "knitr::include_graphics(here('model_runs','m0_8-newMI-biasAdj-srv1990','compare2_spawnbio_uncertainty.png'))",
        "> ",
        "knitr::include_graphics(here('model_runs','m0_8-newMI-biasAdj-srv1990','compare11_recdevs.png'))",
        "> ",
        "knitr::include_graphics(here('model_runs','m0_8-newMI-biasAdj-srv1990','compare11_recdevs.png'))",
        "> ",
        "knitr::include_graphics(here('model_runs','m0_8-newMI-biasAdj-srv1990','compare13_indices.png'))",
        "> ",
        "library(dplyr)",
        "> ",
        "library(here)",
        "> ",
        "library(lubridate)",
        "> ",
        "library(tidyr)",
        "> ",
        "library(ggplot2)",
        "> ",
        "",
        "> ",
        "library(TMB)",
        "> ",
        "library(Rmisc)",
        "> ",
        "",
        "> ",
        "",
        "> ",
        "date_use = \"2022-04-18\"",
        "> ",
        "this_year = lubridate::year(Sys.Date())",
        "> ",
        "last_yr = this_year-1",
        "> ",
        "## Summarise and plot catches by discard/retention/geartype",
        "> ",
        "gearpal = rev(c('grey22',",
        "+ ",
        "            alpha('grey22',0.65), ",
        "+ ",
        "            'goldenrod',",
        "+ ",
        "            alpha('goldenrod',0.65),",
        "+ ",
        "            'seagreen4',",
        "+ ",
        "            alpha('seagreen4',0.65)) )",
        "> ",
        "theme_set(ggsidekick::theme_sleek())",
        "> ",
        "theme_update(legend.text = element_text(size = 12), legend.position = 'bottom',",
        "+ ",
        "                     axis.text = element_text(size = 14),axis.title  = element_text(size = 14))",
        "> ",
        "load(\"~/assessments/2022/goa-fhs-2022/RE/2022-10-03-rema_output.rdata\") ## output",
        "> ",
        "egfrac <- read.csv(here::here('data','survey','2021-10-01_Biomass Fractions in Eastern GOA.csv'))",
        "> ",
        "props <- output$proportion_biomass_by_strata %>% ",
        "+ ",
        "  filter(year == 2021) %>% ",
        "+ ",
        "  mutate(WestYakutat = Eastern*egfrac$Western.Fraction,",
        "+ ",
        "         Southeast = Eastern*egfrac$Eastern.Fraction) %>%",
        "+ ",
        "  select(Western, Central, WestYakutat,Southeast)",
        "> ",
        "sum(props)==1",
        "[1] TRUE\n",
        "> ",
        "props",
        "> ",
        "rec_table <- read.csv(here::here('projection','rec_table.csv'))",
        "> ",
        "abc23 <- as.numeric( rec_table[10,2]) ",
        "> ",
        "abc24 <- as.numeric( rec_table[10,3]) ",
        "> ",
        " apply(props, 2, FUN = function(x) round(x*c(abc23,abc24) )) %>%",
        "+ ",
        "  rbind( round(props*100,5) ,.)",
        "> ",
        "apply(props, 2, FUN = function(x) round(x*c(abc23,abc24) )) %>%",
        "+ ",
        "    rbind( round(props*100,5) ,.)",
        "      Western     Central WestYakutat  Southeast\n1    32.40338    54.42755     5.87549    7.29359\n2 12793.00000 21488.00000  2320.00000 2880.00000\n3 13033.00000 21892.00000  2363.00000 2934.00000\n",
        "> ",
        "apportionment2 <- apply(props, 2, FUN = function(x) round(x*c(abc23,abc24) )) %>%",
        "+ ",
        "  rbind( round(props*100,5) ,.) %>%",
        "+ ",
        "  data.frame() %>%",
        "+ ",
        "  mutate(Total = c(\"\",abc23,abc24),",
        "+ ",
        "         Year = noquote(c(\"\",year(Sys.Date())+1,year(Sys.Date())+2)),",
        "+ ",
        "         Quantity = c(\"Area Apportionment %\", ",
        "+ ",
        "                      \"ABC (t)\",",
        "+ ",
        "                      \"ABC (t)\")) %>% select(Quantity, Year, everything())",
        "> ",
        "apportionment2",
        "              Quantity Year     Western     Central WestYakutat  Southeast Total\n1 Area Apportionment %         32.40338    54.42755     5.87549    7.29359      \n2              ABC (t) 2023 12793.00000 21488.00000  2320.00000 2880.00000 39480\n3              ABC (t) 2024 13033.00000 21892.00000  2363.00000 2934.00000 40222\n",
        "> ",
        "rowSums(apportionment2[,3:6])",
        "[1]   100 39481 40222\n",
        "> ",
        "props",
        "> ",
        "apply(props, 2, FUN = function(x) round(x*c(abc23,abc24) ))",
        "     Western Central WestYakutat Southeast\n[1,]   12793   21488        2320      2880\n[2,]   13033   21892        2363      2934\n",
        "> ",
        "apply(props, 2, FUN = function(x) x*c(abc23,abc24) ) %>%",
        "+ ",
        "  rbind( round(props*100,5) ,.)",
        "> ",
        "apportionment2 <- apply(props, 2, FUN = function(x) x*c(abc23,abc24) ) %>%",
        "+ ",
        "  rbind( round(props*100,5) ,.) %>%",
        "+ ",
        "  data.frame() %>%",
        "+ ",
        "  mutate(Total = c(\"\",abc23,abc24),",
        "+ ",
        "         Year = noquote(c(\"\",year(Sys.Date())+1,year(Sys.Date())+2)),",
        "+ ",
        "         Quantity = c(\"Area Apportionment %\", ",
        "+ ",
        "                      \"ABC (t)\",",
        "+ ",
        "                      \"ABC (t)\")) %>% select(Quantity, Year, everything())",
        "> ",
        "apportionment2",
        "              Quantity Year     Western     Central WestYakutat  Southeast Total\n1 Area Apportionment %         32.40338    54.42755     5.87549    7.29359      \n2              ABC (t) 2023 12792.85254 21487.99498  2319.64347 2879.50901 39480\n3              ABC (t) 2024 13033.28558 21891.84737  2363.23961 2933.62744 40222\n",
        "> ",
        "apportionment2 <- apply(props, 2, FUN = function(x) round(x*c(abc23,abc24) )) %>%",
        "+ ",
        "  rbind( round(props*100,2) ,.) %>%",
        "+ ",
        "  data.frame() %>%",
        "+ ",
        "  mutate(Total = c(\"\",abc23,abc24),",
        "+ ",
        "         Year = noquote(c(\"\",year(Sys.Date())+1,year(Sys.Date())+2)),",
        "+ ",
        "         Quantity = c(\"Area Apportionment %\", ",
        "+ ",
        "                      \"ABC (t)\",",
        "+ ",
        "                      \"ABC (t)\")) %>% select(Quantity, Year, everything())",
        "> ",
        "apportionment2",
        "> ",
        "abc23 - rowSums(apportionment2[,3:6])",
        "[1] 39380    -1  -742\n",
        "> ",
        "rowSums(apportionment2[,3:6])",
        "[1]   100 39481 40222\n",
        "> ",
        "apportionment2",
        "> ",
        "apportionment2",
        "              Quantity Year Western  Central WestYakutat Southeast Total\n1 Area Apportionment %         32.4    54.43        5.88      7.29      \n2              ABC (t) 2023 12793.0 21488.00     2320.00   2880.00 39480\n3              ABC (t) 2024 13033.0 21892.00     2363.00   2934.00 40222\n",
        "> ",
        "apportionment2[,3:6]",
        "> ",
        "apportionment2[,3:6]",
        "  Western  Central WestYakutat Southeast\n1    32.4    54.43        5.88      7.29\n2 12793.0 21488.00     2320.00   2880.00\n3 13033.0 21892.00     2363.00   2934.00\n",
        "> ",
        " sum(apportionment2[2,3:6])",
        "[1] 39481\n",
        "> ",
        "diff23 <- abc23 - sum(apportionment2[2,3:6])",
        "> ",
        "diff24 <- abc24 - sum(apportionment2[3,3:6])",
        "> ",
        "apportionment2[2,4] <- apportionment2[2,4]+diff23",
        "> ",
        "apportionment2[3,4] <- apportionment2[2,4]+diff24",
        "> ",
        "abc23 - sum(apportionment2[2,3:6])==0",
        "[1] TRUE\n",
        "> ",
        " abc24 - sum(apportionment2[3,3:6]) ==0",
        "[1] FALSE\n",
        "> ",
        "rec_table <- read.csv(here::here('projection','rec_table.csv'))",
        "> ",
        "abc23 <- as.numeric( rec_table[10,2]) ",
        "> ",
        "abc24 <- as.numeric( rec_table[10,3]) ",
        "> ",
        "apportionment2 <- apply(props, 2, FUN = function(x) round(x*c(abc23,abc24) )) %>%",
        "+ ",
        "  rbind( round(props*100,2) ,.) %>%",
        "+ ",
        "  data.frame() %>%",
        "+ ",
        "  mutate(Total = c(\"\",abc23,abc24),",
        "+ ",
        "         Year = noquote(c(\"\",year(Sys.Date())+1,year(Sys.Date())+2)),",
        "+ ",
        "         Quantity = c(\"Area Apportionment %\", ",
        "+ ",
        "                      \"ABC (t)\",",
        "+ ",
        "                      \"ABC (t)\")) %>% select(Quantity, Year, everything())",
        "> ",
        "apportionment2",
        "              Quantity Year Western  Central WestYakutat Southeast Total\n1 Area Apportionment %         32.4    54.43        5.88      7.29      \n2              ABC (t) 2023 12793.0 21488.00     2320.00   2880.00 39480\n3              ABC (t) 2024 13033.0 21892.00     2363.00   2934.00 40222\n",
        "> ",
        "",
        "> ",
        "diff23 <- abc23 - sum(apportionment2[2,3:6])",
        "> ",
        "diff24 <- abc24 - sum(apportionment2[3,3:6])",
        "> ",
        "apportionment2[2,4] <- apportionment2[2,4]+diff23",
        "> ",
        "apportionment2[3,4] <- apportionment2[3,4]+diff24",
        "> ",
        "abc23 - sum(apportionment2[2,3:6])==0",
        "[1] TRUE\n",
        "> ",
        " abc24 - sum(apportionment2[3,3:6]) ==0",
        "[1] TRUE\n",
        "> ",
        "write.csv(apportionment2,file = here::here('re',paste0(Sys.Date(),\"-AreaAppportionment.csv\")))",
        "> ",
        "# apportionment table example",
        "> ",
        "",
        "> ",
        "appo <- read.csv(here::here('re',paste0(\"2022-11-01-AreaAppportionment.csv\")))",
        "> ",
        "appo[2:3,4:7] <-  round(appo[2:3,4:7],0)",
        "> ",
        "appo$Year <- as.character(appo$Year)",
        "> ",
        "flextable::flextable(appo[,-1]) %>%",
        "+ ",
        "     flextable::hline_top(part='all') %>% ",
        "+ ",
        "    flextable::hline_bottom() %>%",
        "+ ",
        "  flextable::colformat_num(big.mark = ',') %>%",
        "+ ",
        "  flextable::colformat_double(i = c(2:3), j = c(3:7), digits = 0)",
        "> ",
        " ",
        "> ",
        "apportionment2",
        "              Quantity Year Western  Central WestYakutat Southeast Total\n1 Area Apportionment %         32.4    54.43        5.88      7.29      \n2              ABC (t) 2023 12793.0 21487.00     2320.00   2880.00 39480\n3              ABC (t) 2024 13033.0 21892.00     2363.00   2934.00 40222\n",
        "> ",
        "abc23",
        "[1] 39480\n",
        "> ",
        "",
        "> ",
        "",
        "> ",
        "",
        "> ",
        "rec_table <- read.csv(here::here('projection','rec_table.csv'))",
        "> ",
        "abc23 <- as.numeric( rec_table[10,2]) ",
        "> ",
        "abc24 <- as.numeric( rec_table[10,3]) ",
        "> ",
        "apportionment2 <- apply(props, 2, FUN = function(x) round(x*c(abc23,abc24) )) %>%",
        "+ ",
        "  rbind( round(props*100,2) ,.) %>%",
        "+ ",
        "  data.frame() %>%",
        "+ ",
        "  mutate(Total = c(\"\",abc23,abc24),",
        "+ ",
        "         Year = noquote(c(\"\",year(Sys.Date())+1,year(Sys.Date())+2)),",
        "+ ",
        "         Quantity = c(\"Area Apportionment %\", ",
        "+ ",
        "                      \"ABC (t)\",",
        "+ ",
        "                      \"ABC (t)\")) %>% select(Quantity, Year, everything())",
        "> ",
        "",
        "> ",
        "abc23",
        "[1] 39480\n",
        "> ",
        "abc23 - sum(apportionment2[2,3:6])",
        "[1] -1\n",
        "> ",
        "apportionment2 <- apply(props, 2, FUN = function(x) round(x*c(abc23,abc24) )) %>%",
        "+ ",
        "  rbind( round(props*100,3) ,.) %>%",
        "+ ",
        "  data.frame() %>%",
        "+ ",
        "  mutate(Total = c(\"\",abc23,abc24),",
        "+ ",
        "         Year = noquote(c(\"\",year(Sys.Date())+1,year(Sys.Date())+2)),",
        "+ ",
        "         Quantity = c(\"Area Apportionment %\", ",
        "+ ",
        "                      \"ABC (t)\",",
        "+ ",
        "                      \"ABC (t)\")) %>% select(Quantity, Year, everything())",
        "> ",
        "apportionment2",
        "              Quantity Year   Western   Central WestYakutat Southeast Total\n1 Area Apportionment %         32.403    54.428       5.875     7.294      \n2              ABC (t) 2023 12793.000 21488.000    2320.000  2880.000 39480\n3              ABC (t) 2024 13033.000 21892.000    2363.000  2934.000 40222\n",
        "> ",
        "",
        "> ",
        "diff23 <- abc23 - sum(apportionment2[2,3:6])",
        "> ",
        "diff24 <- abc24 - sum(apportionment2[3,3:6])",
        "> ",
        "apportionment2[2,4] <- apportionment2[2,4]+diff23",
        "> ",
        "apportionment2[3,4] <- apportionment2[3,4]+diff24",
        "> ",
        "",
        "> ",
        "",
        "> ",
        "abc23 - sum(apportionment2[2,3:6])==0",
        "[1] TRUE\n",
        "> ",
        "abc24 - sum(apportionment2[3,3:6]) ==0",
        "[1] TRUE\n",
        "> ",
        "apportionment2",
        "              Quantity Year   Western   Central WestYakutat Southeast Total\n1 Area Apportionment %         32.403    54.428       5.875     7.294      \n2              ABC (t) 2023 12793.000 21487.000    2320.000  2880.000 39480\n3              ABC (t) 2024 13033.000 21892.000    2363.000  2934.000 40222\n",
        "> ",
        "write.csv(apportionment2,file = here::here('re',paste0(Sys.Date(),\"-AreaAppportionment.csv\")))",
        "> ",
        "# apportionment table example",
        "> ",
        "",
        "> ",
        "appo <- read.csv(here::here('re',paste0(\"2022-11-01-AreaAppportionment.csv\")))",
        "> ",
        "appo[2:3,4:7] <-  round(appo[2:3,4:7],0)",
        "> ",
        "appo$Year <- as.character(appo$Year)",
        "> ",
        "flextable::flextable(appo[,-1]) %>%",
        "+ ",
        "     flextable::hline_top(part='all') %>% ",
        "+ ",
        "    flextable::hline_bottom() %>%",
        "+ ",
        "  flextable::colformat_num(big.mark = ',') %>%",
        "+ ",
        "  flextable::colformat_double(i = c(2:3), j = c(3:7), digits = 0)",
        "> ",
        " ",
        "> ",
        "",
        "> ",
        "rec_table <- read.csv(here::here('projection','rec_table.csv'))",
        "> ",
        "abc23 <- as.numeric( rec_table[10,2]) ",
        "> ",
        "abc24 <- as.numeric( rec_table[10,3]) ",
        "> ",
        "apportionment2 <- apply(props, 2, FUN = function(x) round(x*c(abc23,abc24) )) %>%",
        "+ ",
        "  rbind( round(props*100,2) ,.) %>%",
        "+ ",
        "  data.frame() %>%",
        "+ ",
        "  mutate(Total = c(\"\",abc23,abc24),",
        "+ ",
        "         Year = noquote(c(\"\",year(Sys.Date())+1,year(Sys.Date())+2)),",
        "+ ",
        "         Quantity = c(\"Area Apportionment %\", ",
        "+ ",
        "                      \"ABC (t)\",",
        "+ ",
        "                      \"ABC (t)\")) %>% select(Quantity, Year, everything())",
        "> ",
        "",
        "> ",
        "## because the rounded totals don't perfectly sum to the ABC, locate the discrepancy and add to the highest area (per Chris)",
        "> ",
        "",
        "> ",
        "diff23 <- abc23 - sum(apportionment2[2,3:6])",
        "> ",
        "diff24 <- abc24 - sum(apportionment2[3,3:6])",
        "> ",
        "apportionment2[2,4] <- apportionment2[2,4]+diff23",
        "> ",
        "apportionment2[3,4] <- apportionment2[3,4]+diff24",
        "> ",
        "",
        "> ",
        "",
        "> ",
        "abc23 - sum(apportionment2[2,3:6])==0",
        "[1] TRUE\n",
        "> ",
        "abc24 - sum(apportionment2[3,3:6]) ==0",
        "[1] TRUE\n",
        "> ",
        "",
        "> ",
        "write.csv(apportionment2,file = here::here('re',paste0(Sys.Date(),\"-AreaAppportionment.csv\")))",
        "> ",
        "",
        "> ",
        "# apportionment table example",
        "> ",
        "",
        "> ",
        "appo <- read.csv(here::here('re',paste0(\"2022-11-01-AreaAppportionment.csv\")))",
        "> ",
        "appo[2:3,4:7] <-  round(appo[2:3,4:7],0)",
        "> ",
        "appo$Year <- as.character(appo$Year)",
        "> ",
        "flextable::flextable(appo[,-1]) %>%",
        "+ ",
        "     flextable::hline_top(part='all') %>% ",
        "+ ",
        "    flextable::hline_bottom() %>%",
        "+ ",
        "  flextable::colformat_num(big.mark = ',') %>%",
        "+ ",
        "  flextable::colformat_double(i = c(2:3), j = c(3:7), digits = 0)",
        "> ",
        " ",
        "> ",
        "diff24",
        "[1] 0\n",
        "> ",
        "SSplotData(m2017)",
        "> ",
        "knitr::include_graphics(here('model_runs','m0_8-newMI-biasAdj-srv1990','compare16_densities_SR_LN(R0).png'))",
        "Error in here(\"model_runs\", \"m0_8-newMI-biasAdj-srv1990\", \"compare16_densities_SR_LN(R0).png\") : \n  unused arguments (\"m0_8-newMI-biasAdj-srv1990\", \"compare16_densities_SR_LN(R0).png\")\n",
        "> ",
        "knitr::include_graphics(here('model_runs','m0_8-newMI-biasAdj-srv1990','compare16_densities_SR_LN(R0).png'))",
        "Error in here(\"model_runs\", \"m0_8-newMI-biasAdj-srv1990\", \"compare16_densities_SR_LN(R0).png\") : \n  unused arguments (\"m0_8-newMI-biasAdj-srv1990\", \"compare16_densities_SR_LN(R0).png\")\n",
        "> ",
        "knitr::include_graphics(here::here('model_runs','m0_8-newMI-biasAdj-srv1990','compare16_densities_SR_LN(R0).png'))",
        "> ",
        "with(subset(base_model$lendbase, Fleet == 1),(unique(Yr))",
        "+ ",
        ")",
        " [1] 1982 1991 1992 1993 1994 1995 1996 1997 1998 2000 2001 2002 2003 2004 2005 2006 2007 2008 2009\n[20] 2010 2011 2012 2013 2014 2015 2016 2017 2018 2019 2020 2021 2022\n",
        "> ",
        "with(subset(base_model$lendbase, Fleet == 1),(unique(Yr))) %in% 1982:2022",
        " [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n[20] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE\n",
        "> ",
        "1982:2022 %in% with(subset(base_model$lendbase, Fleet == 1),(unique(Yr))) ",
        " [1]  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[17]  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n[33]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE\n",
        "> ",
        "c(1982:2022)[!(1982:2022 %in% with(subset(base_model$lendbase, Fleet == 1),(unique(Yr))) )]",
        "[1] 1983 1984 1985 1986 1987 1988 1989 1990 1999\n",
        "> ",
        "paste0(c(1982:2022)[!(1982:2022 %in% with(subset(base_model$lendbase, Fleet == 1),(unique(Yr))) )], collapse = \", \"))",
        "Error: unexpected ')' in \"paste0(c(1982:2022)[!(1982:2022 %in% with(subset(base_model$lendbase, Fleet == 1),(unique(Yr))) )], collapse = \", \"))\"\n",
        "> ",
        "paste0(c(1982:2022)[!(1982:2022 %in% with(subset(base_model$lendbase, Fleet == 1),(unique(Yr))) )], collapse = \", \")",
        "[1] \"1983, 1984, 1985, 1986, 1987, 1988, 1989, 1990, 1999\"\n",
        "> ",
        "subset(base_model$parameters, Label ==\"Mat50%_Fem_GP_1\")[,'Value']",
        "[1] 8.74\n",
        "> ",
        "> ",
        "subset(base_model$parameters, Label == \"Mat_slope_Fem_GP_1\")[,'Value']",
        "[1] -0.773\n",
        "> ",
        "log(19)/ -0.773",
        "[1] -3.809106\n",
        "> ",
        "-3.809106+8.74",
        "[1] 4.930894\n",
        "> ",
        "12.54-8.74",
        "[1] 3.8\n",
        "> ",
        "appo",
        "  X             Quantity Year Western  Central WestYakutat Southeast Total\n1 1 Area Apportionment % <NA>    32.4    54.43        5.88      7.29    NA\n2 2              ABC (t) 2023 12793.0 21487.00     2320.00   2880.00 39480\n3 3              ABC (t) 2024 13033.0 21892.00     2363.00   2934.00 40222\n",
        "> ",
        "spex",
        "      Yr variable    value\n1   1977      TAC       NA\n2   1978      TAC       NA\n3   1979      TAC       NA\n4   1980      TAC       NA\n5   1981      TAC       NA\n6   1982      TAC       NA\n7   1983      TAC       NA\n8   1984      TAC       NA\n9   1985      TAC       NA\n10  1986      TAC       NA\n11  1987      TAC       NA\n12  1988      TAC       NA\n13  1989      TAC       NA\n14  1990      TAC       NA\n15  1991      TAC 10000.00\n16  1992      TAC 10000.00\n17  1993      TAC 10000.00\n18  1994      TAC 10000.00",
        "\n19  1995      TAC  9740.00\n20  1996      TAC  9740.00\n21  1997      TAC  9040.00\n22  1998      TAC  9040.00\n23  1999      TAC  9040.00\n24  2000      TAC  9060.00\n25  2001      TAC  9060.00\n26  2002      TAC  9280.00\n27  2003      TAC 11150.00\n28  2004      TAC 10880.00\n29  2005      TAC 10390.00\n30  2006      TAC  9077.00\n31  2007      TAC  9148.00\n32  2008      TAC 11054.00\n33  2009      TAC 11181.00\n34  2010      TAC 10441.00\n35  2011      TAC 10587.00\n36  2012      TAC 30319.00\n37  2013      TAC 30496.00",
        "\n38  2014      TAC 27746.00\n39  2015      TAC 27756.00\n40  2016      TAC 27832.00\n41  2017      TAC 27856.00\n42  2018      TAC 26388.00\n43  2019      TAC 26489.00\n44  2020      TAC 28262.00\n45  2021      TAC       NA\n46  2022      TAC       NA\n47  1977      ABC       NA\n48  1978      ABC       NA\n49  1979      ABC       NA\n50  1980      ABC       NA\n51  1981      ABC       NA\n52  1982      ABC       NA\n53  1983      ABC       NA\n54  1984      ABC       NA\n55  1985      ABC       NA\n56  1986      ABC       NA",
        "\n57  1987      ABC       NA\n58  1988      ABC       NA\n59  1989      ABC       NA\n60  1990      ABC       NA\n61  1991      ABC 50300.00\n62  1992      ABC 48280.00\n63  1993      ABC 49450.00\n64  1994      ABC 35850.00\n65  1995      ABC 28790.00\n66  1996      ABC 52270.00\n67  1997      ABC 26110.00\n68  1998      ABC 26110.00\n69  1999      ABC 26110.00\n70  2000      ABC 26270.00\n71  2001      ABC 26270.00\n72  2002      ABC 22690.00\n73  2003      ABC 41390.00\n74  2004      ABC 51720.00\n75  2005      ABC 45100.00",
        "\n76  2006      ABC 37820.00\n77  2007      ABC 39110.00\n78  2008      ABC 44735.00\n79  2009      ABC 46464.00\n80  2010      ABC 47422.00\n81  2011      ABC 49133.00\n82  2012      ABC 47407.00\n83  2013      ABC 48738.00\n84  2014      ABC 41231.00\n85  2015      ABC 41349.00\n86  2016      ABC 35020.00\n87  2017      ABC 35243.00\n88  2018      ABC 35266.00\n89  2019      ABC 36782.00\n90  2020      ABC 38196.00\n91  2021      ABC       NA\n92  2022      ABC       NA\n93  1977      OFL       NA\n94  1978      OFL       NA",
        "\n95  1979      OFL       NA\n96  1980      OFL       NA\n97  1981      OFL       NA\n98  1982      OFL       NA\n99  1983      OFL       NA\n100 1984      OFL       NA\n101 1985      OFL       NA\n102 1986      OFL       NA\n103 1987      OFL       NA\n104 1988      OFL       NA\n105 1989      OFL       NA\n106 1990      OFL       NA\n107 1991      OFL       NA\n108 1992      OFL 63100.00\n109 1993      OFL 64780.00\n110 1994      OFL 39310.00\n111 1995      OFL 31557.00\n112 1996      OFL 31557.00\n113 1997      OFL 34010.00",
        "\n114 1998      OFL 34010.00\n115 1999      OFL 34010.00\n116 2000      OFL 34210.00\n117 2001      OFL 34210.00\n118 2002      OFL 29530.00\n119 2003      OFL 51560.00\n120 2004      OFL 64750.00\n121 2005      OFL 56500.00\n122 2006      OFL 47003.00\n123 2007      OFL 48658.00\n124 2008      OFL 55787.00\n125 2009      OFL 57911.00\n126 2010      OFL 59295.00\n127 2011      OFL 61412.00\n128 2012      OFL 59380.00\n129 2013      OFL 61036.00\n130 2014      OFL 50664.00\n131 2015      OFL 50792.00\n132 2016      OFL 42840.00",
        "\n133 2017      OFL 43128.00\n134 2018      OFL 43011.00\n135 2019      OFL 44865.00\n136 2020      OFL 46572.00\n137 2021      OFL       NA\n138 2022      OFL       NA\n139 1977    Catch  1034.00\n140 1978    Catch   452.00\n141 1979    Catch   165.00\n142 1980    Catch  2068.00\n143 1981    Catch  1070.00\n144 1982    Catch  1368.00\n145 1983    Catch  1080.00\n146 1984    Catch   548.70\n147 1985    Catch   319.50\n148 1986    Catch   147.30\n149 1987    Catch   150.90\n150 1988    Catch   520.30\n151 1989    Catch   747.40",
        "\n152 1990    Catch  1447.00\n153 1991    Catch  1236.87\n154 1992    Catch  2314.72\n155 1993    Catch  2823.66\n156 1994    Catch  2524.77\n157 1995    Catch  2180.06\n158 1996    Catch  3074.10\n159 1997    Catch  2441.14\n160 1998    Catch  1731.12\n161 1999    Catch   897.32\n162 2000    Catch  1547.83\n163 2001    Catch  1911.74\n164 2002    Catch  2145.75\n165 2003    Catch  2459.42\n166 2004    Catch  2398.25\n167 2005    Catch  2552.16\n168 2006    Catch  3142.21\n169 2007    Catch  3129.59\n170 2008    Catch  3446.28",
        "\n171 2009    Catch  3663.18\n172 2010    Catch  3903.39\n173 2011    Catch  2731.62\n174 2012    Catch  2167.23\n175 2013    Catch  2818.68\n176 2014    Catch  2556.77\n177 2015    Catch  2001.29\n178 2016    Catch  2421.54\n179 2017    Catch  2050.49\n180 2018    Catch  2202.28\n181 2019    Catch  2667.93\n182 2020    Catch  1911.45\n183 2021    Catch   707.78\n184 2022    Catch   707.78\n",
        "> ",
        "",
        "> ",
        "spex <- read.csv(here::here('data','catch',paste0('2022-09-29-harvestSpex.csv'))) %>%",
        "+ ",
        "  tidyr::pivot_wider(., id_cols = 'Yr',names_from = variable, values_from = value) %>%",
        "+ ",
        "  filter(Yr > 1994)",
        "> ",
        "",
        "> ",
        "## manually reshape the raw catches for discard/retained percentage",
        "> ",
        "catch_discard <- read.csv(here::here('data','catch',paste0('2022-10-13-catch-raw.csv'))) %>%",
        "+ ",
        "  # merge(., spex, by.x = 'YEAR', by.y ='Yr') %>%",
        "+ ",
        "  filter(TYPE == 'D') %>%",
        "+ ",
        "  group_by(YEAR) %>%",
        "+ ",
        "  dplyr::summarise(discT = sum(TONS) )",
        "> ",
        "",
        "> ",
        "spex2 <- merge(catch_discard, spex, by.x = 'YEAR', by.y ='Yr') %>%",
        "+ ",
        "  mutate( \"Total Catch\" = round(Catch,0),",
        "+ ",
        "          catchRet = 100*round(1-discT/Catch,2) )%>%",
        "+ ",
        "  select(Year = YEAR, OFL, ABC, TAC, \"Total Catch\"  , \"% Retained\" = catchRet)  ",
        "> ",
        "spex2$Year <- as.character(spex2$Year)        ",
        "> ",
        "spex2$`Total Catch`[spex2$Year==2022] <- base_model$catch$Obs[base_model$catch$Yr==2022]",
        "> ",
        "  spex2$`Total Catch` <- round(spex2$`Total Catch`,0)",
        "> ",
        "  ",
        "> ",
        "flextable::regulartable(spex2) %>%  ",
        "+ ",
        "      flextable::set_caption(\"Historical OFLs, ABCs, TACs, total catch (used in model) and percent retention through 13 Oct, 2022.\") %>%",
        "+ ",
        "  flextable::colformat_num(big.mark = \",\")",
        "> ",
        "",
        "> ",
        "spex <- read.csv(here::here('data','catch',paste0('2022-09-29-harvestSpex.csv'))) %>%",
        "+ ",
        "  tidyr::pivot_wider(., id_cols = 'Yr',names_from = variable, values_from = value) %>%",
        "+ ",
        "  filter(Yr > 1994)",
        "> ",
        "",
        "> ",
        "## manually reshape the raw catches for discard/retained percentage",
        "> ",
        "catch_discard <- read.csv(here::here('data','catch',paste0('2022-10-13-catch-raw.csv'))) %>%",
        "+ ",
        "  # merge(., spex, by.x = 'YEAR', by.y ='Yr') %>%",
        "+ ",
        "  filter(TYPE == 'D') %>%",
        "+ ",
        "  group_by(YEAR) %>%",
        "+ ",
        "  dplyr::summarise(discT = sum(TONS) )",
        "> ",
        "",
        "> ",
        "spex2 <- merge(catch_discard, spex, by.x = 'YEAR', by.y ='Yr') %>%",
        "+ ",
        "  mutate( \"Total Catch\" = round(Catch,0),",
        "+ ",
        "          catchRet = 100*round(1-discT/Catch,2) )%>%",
        "+ ",
        "  select(Year = YEAR, OFL, ABC, TAC, \"Total Catch\"  , \"% Retained\" = catchRet)  ",
        "> ",
        "spex2$Year <- as.character(spex2$Year)        ",
        "> ",
        "# spex2$`Total Catch`[spex2$Year==2022] <- base_model$catch$Obs[base_model$catch$Yr==2022]",
        "> ",
        "#   spex2$`Total Catch` <- round(spex2$`Total Catch`,0)",
        "> ",
        "  ",
        "> ",
        "flextable::regulartable(spex2) %>%  ",
        "+ ",
        "      flextable::set_caption(\"Historical OFLs, ABCs, TACs, total catch (used in model) and percent retention through 13 Oct, 2022.\") %>%",
        "+ ",
        "  flextable::colformat_num(big.mark = \",\")",
        "> ",
        "",
        "> ",
        "spex <- read.csv(here::here('data','catch',paste0('2022-09-29-harvestSpex.csv'))) %>%",
        "+ ",
        "  tidyr::pivot_wider(., id_cols = 'Yr',names_from = variable, values_from = value) %>%",
        "+ ",
        "  filter(Yr > 1994)",
        "> ",
        "",
        "> ",
        "## manually reshape the raw catches for discard/retained percentage",
        "> ",
        "catch_discard <- read.csv(here::here('data','catch',paste0('2022-10-13-catch-raw.csv'))) %>%",
        "+ ",
        "  # merge(., spex, by.x = 'YEAR', by.y ='Yr') %>%",
        "+ ",
        "  filter(TYPE == 'D') %>%",
        "+ ",
        "  group_by(YEAR) %>%",
        "+ ",
        "  dplyr::summarise(discT = sum(TONS) )",
        "> ",
        "",
        "> ",
        "spex2 <- merge(catch_discard, spex, by.x = 'YEAR', by.y ='Yr') %>%",
        "+ ",
        "  mutate( \"Total Catch\" = round(Catch,0),",
        "+ ",
        "          catchRet = 100*round(1-discT/Catch,2) )%>%",
        "+ ",
        "  select(Year = YEAR, OFL, ABC, TAC, \"Total Catch\"  , \"% Retained\" = catchRet)  ",
        "> ",
        "spex2$Year <- as.character(spex2$Year)        ",
        "> ",
        "# spex2$`Total Catch`[spex2$Year==2022] <- base_model$catch$Obs[base_model$catch$Yr==2022]",
        "> ",
        "#   spex2$`Total Catch` <- round(spex2$`Total Catch`,0)",
        "> ",
        "  ",
        "> ",
        "flextable::regulartable(spex2) %>%  ",
        "+ ",
        "      flextable::set_caption(\"Historical OFLs, ABCs, TACs, total catch (used in model) and percent retention through 13 Oct, 2022.\") %>%",
        "+ ",
        "  flextable::colformat_num(big.mark = \",\")",
        "> ",
        "48069+15558+36057",
        "[1] 99684\n",
        "> ",
        "48069+\t52496+\t3315+15558+13170+1158+36057+10078+92+7",
        "[1] 180000\n",
        "> ",
        "ggplot(data = NULL, aes(x = yr, y = catch_mt)) +",
        "+ ",
        "      # theme_void()+   theme(plot.background = element_rect(fill = \"#212122\"))+",
        "+ ",
        "  ggsidekick::theme_sleek() +",
        "+ ",
        "",
        "+ ",
        "  geom_line(data = catchfull, color = 'grey22', size = 5) +",
        "+ ",
        "  geom_line(data = subset(catchfull, yr > 2021), color = 'dodgerblue2',size = 5) +",
        "+ ",
        "  labs(x = 'Year', y = 'Catch (t)')",
        "> ",
        "ggplot(data = NULL, aes(x = yr, y = catch_mt)) +",
        "+ ",
        "    # theme_void()+   theme(plot.background = element_rect(fill = \"#212122\"))+",
        "+ ",
        "    ggsidekick::theme_sleek() +",
        "+ ",
        "    ",
        "+ ",
        "    geom_line(data = catchfull, color = 'grey22', size = 5) +",
        "+ ",
        "    geom_line(data = subset(catchfull, yr > 2021), color = 'dodgerblue2',size = 5) +",
        "+ ",
        "    labs(x = 'Year', y = 'Catch (t)')",
        "> ",
        "catchfull",
        "> ",
        "ggplot(data = NULL, aes(x = yr, y = catch_mt)) +",
        "+ ",
        "    # theme_void()+   theme(plot.background = element_rect(fill = \"#212122\"))+",
        "+ ",
        "    ggsidekick::theme_sleek() +",
        "+ ",
        "    scale_x_continuous(limits = c(1977,2022)) +",
        "+ ",
        "    geom_line(data = catchfull, color = 'blue', size = 5) +",
        "+ ",
        "    geom_line(data = subset(catchfull, yr > 2021), color = 'blue',size = 5) +",
        "+ ",
        "    labs(x = 'Year', y = 'Catch (t)').",
        "Error: unexpected symbol in:\n\"    geom_line(data = subset(catchfull, yr > 2021), color = 'blue',size = 5) +\n    labs(x = 'Year', y = 'Catch (t)').\"\n",
        "> ",
        "ggplot(data = NULL, aes(x = yr, y = catch_mt)) +",
        "+ ",
        "    # theme_void()+   theme(plot.background = element_rect(fill = \"#212122\"))+",
        "+ ",
        "    ggsidekick::theme_sleek() +",
        "+ ",
        "    scale_x_continuous(limits = c(1977,2022)) +",
        "+ ",
        "    geom_line(data = catchfull, color = 'blue', size = 5) +",
        "+ ",
        "    geom_line(data = subset(catchfull, yr > 2021), color = 'blue',size = 5) +",
        "+ ",
        "    labs(x = 'Year', y = 'Catch (t)')",
        "geom_path: Each group consists of only one observation. Do you need to adjust the group aesthetic?\n",
        "Warning messages:\n",
        "1: Removed 2 row(s) containing missing values (geom_path). \n",
        "2: Removed 2 row(s) containing missing values (geom_path). \n",
        "> ",
        "ggplot(data = NULL, aes(x = yr, y = catch_mt)) +",
        "+ ",
        "    # theme_void()+   theme(plot.background = element_rect(fill = \"#212122\"))+",
        "+ ",
        "    ggsidekick::theme_sleek() +",
        "+ ",
        "    scale_x_continuous(limits = c(1977,2022)) +",
        "+ ",
        "    geom_line(data = catchfull, color = 'blue') +",
        "+ ",
        "    geom_line(data = subset(catchfull, yr > 2021), color = 'blue') +",
        "+ ",
        "    labs(x = 'Year', y = 'Catch (t)')",
        "geom_path: Each group consists of only one observation. Do you need to adjust the group aesthetic?\n",
        "Warning messages:\n",
        "1: Removed 2 row(s) containing missing values (geom_path). \n",
        "2: Removed 2 row(s) containing missing values (geom_path). \n",
        "> ",
        "ggplot(data = NULL, aes(x = yr, y = catch_mt)) +",
        "+ ",
        "      # theme_void()+   theme(plot.background = element_rect(fill = \"#212122\"))+",
        "+ ",
        "  ggsidekick::theme_sleek() +",
        "+ ",
        "scale_x_continuous(limits = c(1977,2022)) +",
        "+ ",
        "  geom_line(data = catchfull, color = 'blue', lwd = 2) +",
        "+ ",
        "  geom_line(data = subset(catchfull, yr > 2021), color = 'blue') +",
        "+ ",
        "  labs(x = 'Year', y = 'Catch (t)', lwd = 2)",
        "> ",
        "ggplot(data = NULL, aes(x = yr, y = catch_mt)) +",
        "+ ",
        "    # theme_void()+   theme(plot.background = element_rect(fill = \"#212122\"))+",
        "+ ",
        "    ggsidekick::theme_sleek() +",
        "+ ",
        "    scale_x_continuous(limits = c(1977,2022)) +",
        "+ ",
        "    geom_line(data = catchfull, color = 'blue', lwd = 2) +",
        "+ ",
        "    geom_line(data = subset(catchfull, yr > 2021), color = 'blue') +",
        "+ ",
        "    labs(x = 'Year', y = 'Catch (t)', lwd = 2)",
        "geom_path: Each group consists of only one observation. Do you need to adjust the group aesthetic?\n",
        "Warning messages:\n",
        "1: Removed 2 row(s) containing missing values (geom_path). \n",
        "2: Removed 2 row(s) containing missing values (geom_path). \n",
        "> ",
        "# knitr::include_graphics(here::here(\"model_runs\",\"m0_8-newMI-biasAdj\",\"plots\",\"catch1 landings.png\"))",
        "> ",
        "knitr::include_graphics(here::here(\"data\",\"catch\",\"catch_correct_units.png\"))",
        "\nRestarting R session...\n\n"
    ]
}